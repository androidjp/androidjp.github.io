---
title: 初步了解RBAC
date: 2020-09-27 15:41:41
tags:
- 用户授权
categories:
- 用户授权
---
> RBAC（Role-Based Access Control）基于角色的权限控制，接下来让我们进一步了解它的前世今生。

<!--more-->

# 概述

RBAC（Role-Based Access Control）基于角色的访问控制。

RBAC96模型：在20世纪90年代期间，大量的专家学者和专门研究单位对RBAC的概念进行了深入研究，先后提出了许多类型的RBAC模型，其中以美国George Mason大学信息安全技术实验室（LIST）提出的RBAC96模型最具有系统性，得到普遍的公认。

## 授权的过程

RBAC认为权限的过程可以抽象概括为：判断【Who是否可以对What进行How的访问操作（Operator）】这个逻辑表达式的值是否为True的求解过程。

权限问题 → Who,What,How的问题，三者组成三元组。
- Who：权限的拥有者或主体（如：User，Role）
- What：操作or对象（Operation，Object）
- How：具体的权限（可访问、可修改 等等）

## 安全原则

RBAC支持公认的安全原则：
- 最小特权原则【分配给某人的角色和权限尽量要细分，不要一个权限可以做N件事】
- 在RBAC模型中可以通过限制分配给角色权限的多少和大小来实现，分配给到某用户对应的角色的权限只要不超过该用户完成其任务的需要，即可；
- 责任分离原则【一个动作的允许，可以由不止一个角色来决定】
- 在RBAC模型中可以通过在完成敏感任务过程中分配两个责任上互相约束的两个角色来实现，例如在清查账目时，只需要设置财务管理员和会计两个角色参加就可以了。
- 数据抽象原则【在权限细分层面，不要直接用"用户表可读"这样的具体字眼，而是抽象得更加易懂】
- 数据抽象是借助于抽象许可权这样的概念实现的，如在账目管理活动中，可以使用信用、借方等抽象许可权，而不是使用操作系统提供的读、写、执行等具体的许可权。但RBAC并不强迫实现这些原则，安全管理员可以允许配置RBAC模型使它不支持这些原则。因此，RBAC支持数据抽象的程度与RBAC模型的实现细节有关。

## RBAC是一个种族

RBAC96是一个模型族，其中包括RBAC0~RBAC3四个概念性模型。
![](/images/20200927/5.png)
1. 基本模型RBAC0定义了完全支持RBAC概念的任何系统的最低需求。
2. RBAC1和RBAC2两者都包含RBAC0，但各自都增加了独立的特点，它们被称为高级模型。
  1. **RBAC1中增加了角色分级的概念，一个角色可以从另一个角色继承许可权**。
  2. **RBAC2中增加了一些限制，强调在RBAC的不同组件中在配置方面的一些限制**。
3. RBAC3称为统一模型，它包含了RBAC1和RBAC2，利用传递性，也把RBAC0包括在内。这些模型构成了RBAC96模型族。



## RBAC0

作为RBAC的核心，四个部分组成：
1. 用户（User）
2. 角色（Role）
3. 许可（Permission）
4. 会话（Session）

![](/images/20200927/0.png)

每个角色至少具备一个权限，每个用户至少扮演一个角色；

可以对两个完全不同的角色分配完全相同的访问权限；

会话由用户控制，一个用户可以创建会话并激活多个用户角色，从而获取相应的访问权限，用户可以在会话中更改激活角色，并且用户可以主动结束一个会话；

用户和角色是**多对多**关系，我和你都可以同时是酒店服务员；

角色和许可（权限）是**多对多**关系，一个权利可以授予多个角色，一个角色也可拥有N个权利；



## RBAC1

相比RBAC0，多了什么：角色间的继承关系（角色分层模型，角色之间有了上下级的区别）。
![](/images/20200927/1.png)


## RBAC2

相比RBAC0，多了什么：角色的访问控制，添加了职责分离关系。

职责分离包括：
- 静态职责分离（SSD）
- SSD主要用在**用户**和**角色**之间（授权阶段），主要约束有：
- 互斥角色：同一个用户不能授予互斥关系的角色，如：不能同时授予（会计和出纳）或（警察与盗贼）的角色；
- 基数约束：一个用户拥有的角色是有限的，一个角色拥有的许可也是有限的；
- 先决条件约束：用户想要得到高级权限，必须先拥有低级权限；
- 动态职责分离（DSD）
- DSD用于 **会话**和**角色**之间的约束，动态决定怎么计划角色，如：一个用户拥有5个角色，只激活2个；

![](/images/20200927/2.png)


## RBAC3

1 + 2 = 3

![](/images/20200927/3.png)

# vs ACL

ACL，访问控制列表，核心在于：用户直接和权限挂钩。

于是乎，相较于RBAC，ACL在授权时复杂度较高，如果加入用户组，也会导致系统不好理解，在判断用户是否拥有某个权限时较为困难。


# 一个较为完善的基于RBAC的ERD图

![](/images/20200927/4.png)

- 以上所有的表，都可以加上created_date, updated_date 等较为common的列；
- 当然，除了以上的这些数据库表，还可以设计“操作日志表”，用于存储（操作人、操作时间、操作内容）；